import Vue from 'vue'
import App from './App.vue'
import router from './router'
import fetch from './fetch';
import utils from './utils';

Vue.prototype.$bus = new Vue;

Vue.prototype.$axios = fetch;

import './styles/base.css';
import './styles/common.css';

Vue.filter('toBety', size => {
  return utils.toBety(size);
});

Vue.filter('dePath', item => {
  const imgReg = /\.(png|jpg|gif|jpeg|webp)$/;
  const isImg = imgReg.test(item.path);

  if (!isImg) return 'data:image/png;base64,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';

  const { uuid, path } = item;
  const pin_proxy = utils.storage.get('pin_proxy');
  const access_token = utils.storage.get('access_token');
  var DOWNLOAD_FILE_PRIVATE = '/downloadFile';
  return `${pin_proxy}.${DOWNLOAD_FILE_PRIVATE}?access_token=${access_token}&uuid=${uuid}&path=${path}`;
});

Vue.filter('deUploadSrc', item => {
  const { uuid, path } = item;
  const pin_proxy = utils.storage.get('pin_proxy');
  const access_token = utils.storage.get('access_token');
  var DOWNLOAD_FILE_PRIVATE = '/downloadFile';
  return `${pin_proxy}.${DOWNLOAD_FILE_PRIVATE}?access_token=${access_token}&uuid=${uuid}&path=${path}`;
});

Vue.filter('formatTime', time => {
  return utils.formatTime(time);
});

Vue.config.productionTip = false

new Vue({
  router,
  render: h => h(App)
}).$mount('#app')
